(function(e){function t(t){for(var a,l,o=t[0],i=t[1],c=t[2],f=0,p=[];f<o.length;f++)l=o[f],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&p.push(n[l][0]),n[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var i=r[o];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},n={app:0},s=[];function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("TestTask")],1)},s=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e._v(" "+e._s(e.loadMsg)+" "),r("div",{staticClass:"flexbox-wrapper"},[e._l(e.typedArray,(function(t,a){return[r("div",{key:a,staticClass:"input-wrapper multiple__selecting"},[r("label",{staticClass:"typo__label"},[e._v(e._s("Тип "+e.arrayOfTypes[a]))]),"object"!==e.arrayOfTypes[a]?r("Multiselect",{attrs:{options:t,multiple:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Выберите значение","preselect-first":!1},on:{input:function(t){return e.isPropEmpty(e.arrayOfTypes[a])}},model:{value:e.value[e.arrayOfTypes[a]],callback:function(t){e.$set(e.value,e.arrayOfTypes[a],t)},expression:"value[arrayOfTypes[index]]"}}):r("Multiselect",{attrs:{options:t,multiple:!0,"track-by":"someProperty",label:"someProperty","close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Выберите значение","preselect-first":!1},on:{input:function(t){return e.isPropEmpty(e.arrayOfTypes[a])}},model:{value:e.value[e.arrayOfTypes[a]],callback:function(t){e.$set(e.value,e.arrayOfTypes[a],t)},expression:"value[arrayOfTypes[index]]"}})],1)]}))],2),r("SelectedValues",{attrs:{selected:e.value}}),r("button",{staticClass:"state reload",on:{click:function(t){return e.resetApp()}}},[e._v("Перезагрузить")]),r("br"),e._l(e.stateArray,(function(t,a){return r("button",{key:a,staticClass:"state",class:{current:a==e.stateArray.length-1,add:"add"==t.action,rem:"remove"==t.action},on:{click:function(t){return e.rollbackState(a)}}},[e._v(e._s(("add"==t.action?"+":"-")+" "+t.element))])})),r("br"),r("button",{directives:[{name:"show",rawName:"v-show",value:e.stateArray.length>1,expression:"stateArray.length > 1"}],staticClass:"state cancel",on:{click:function(t){return e.rollbackState(e.stateArray.length-2)}}},[e._v("Отмена")])],2)},o=[],i=r("53ca"),c=r("1da1"),u=(r("96cf"),r("d3b7"),r("b64b"),r("caad"),r("2532"),r("8e5f")),f=r.n(u),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"output"},e._l(e.selected,(function(t,a){return r("div",{key:a,staticClass:"list"},[r("p",{directives:[{name:"show",rawName:"v-show",value:t[0],expression:"group[0]"}],staticClass:"header-list"},[e._v(e._s(a))]),r("ul",e._l(t,(function(t){return r("li",{key:t,staticClass:"item-list"},[e._v(e._s(t))])})),0)])})),0)},h=[],d={name:"SelectedValues",props:["selected"],data:function(){return{types:[]}}},y=d,v=(r("aef2"),r("2877")),g=Object(v["a"])(y,p,h,!1,null,null,null),b=g.exports,m={name:"TestTask",components:{Multiselect:f.a,SelectedValues:b},data:function(){return{loadMsg:"",fetchedData:[],flattenedArray:[],arrayOfTypes:[],typedArray:[],value:{},stateArray:[]}},created:function(){this.loadData("https://raw.githubusercontent.com/WilliamRu/TestAPI/master/db.json")},methods:{loadData:function(e){var t=this,r=(new Date).getTime();fetch(e).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){var n,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadMsg="Загрузка...",e.next=3,a.json();case 3:if(n=e.sent,t.fetchedData=n.testArr,t.arrayFlattening(t.fetchedData),t.findArrayTypes(t.flattenedArray),t.typizeArray(t.flattenedArray,t.arrayOfTypes),a.ok){e.next=11;break}return s=n&&n.message||a.statusText,e.abrupt("return",Promise.reject(s));case 11:l=(new Date).getTime()-r,t.loadMsg="Загружено за "+l/1e3+" секунд";case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return console.timeEnd})).catch((function(e){t.loadMsg=e,console.error("Произошла ошибка!",e)}))},isPropEmpty:function(e){0==this.value[e].length&&delete this.value[e]},arrayFlattening:function(e){for(var t=0;t<e.length;t++)Array.isArray(e[t])?this.arrayFlattening(e[t]):this.flattenedArray.push(e[t])},findArrayTypes:function(e){for(var t=0;t<e.length;t++){var r=Object(i["a"])(e[t]);this.arrayOfTypes.indexOf(r)<0&&this.arrayOfTypes.push(r)}console.log("Типы массивов:"+this.arrayOfTypes),console.log("Всего типов массивов:"+this.arrayOfTypes.length)},typizeArray:function(e,t){for(var r=0;r<t.length;r++)this.typedArray.push([]);for(var a=0;a<e.length;a++)null!==e[a]&&this.typedArray[t.indexOf(Object(i["a"])(e[a]))].push(e[a])},resetApp:function(){var e=this;this.loadMsg="",this.fetchedData=[],this.flattenedArray=[],this.arrayOfTypes=[],this.typedArray=[],this.value={},setTimeout((function(){e.stateArray=[]}),10),this.loadData("https://raw.githubusercontent.com/WilliamRu/TestAPI/master/db.json")},addStateChange:function(e,t,r){var a={action:e,group:t,element:r};this.stateArray.length>9?(this.stateArray.shift(),this.stateArray.push(a)):this.stateArray.push(a)},rollbackChange:function(e){if("add"==e.action){var t=this.value[e.group],r=t.indexOf(e.element);console.log(t[r]+" удаляется"),t.pop(r)}else console.log(e.element+" добавляется в "+this.value[e.group]),this.value[e.group].push(e.element)},rollbackState:function(e){for(var t=this.stateArray.length-1;t>e;t--)this.rollbackChange(this.stateArray[t]),this.stateArray.pop(t)}},computed:{computedModel:function(){return Object.assign({},this.value)}},watch:{computedModel:{handler:function(e,t){var r=Object.keys(e),a=Object.keys(t);if(r.length<a.length){for(var n=0;n<a.length;n++)if(!r.includes(a[n])){var s=a[n];console.log("Удалена группа "+s),console.log("Удален элемент "+t[s][0]),this.addStateChange("remove",s,t[s][0])}}else if(r.length>a.length){for(var l=0;l<r.length;l++)if(!a.includes(r[l])){var o=r[l];console.log("Добавлена группа "+o),console.log("Добавлен элемент "+e[o][0]),this.addStateChange("add",o,e[o][0])}}else{console.log("Группы не изменились");for(var i=0;i<r.length;i++){var c=r[i];if(e[c].length<t[c].length)for(var u=0;u<t[c].length;u++){var f=t[c][u];if(!e[c].includes(f)){var p=f;console.log("Удален элемент "+p+" из группы "+c),this.addStateChange("remove",c,p)}}else{if(!(e[c].length>t[c].length))continue;for(var h=0;h<e[c].length;h++){var d=e[c][h];if(!t[c].includes(d)){var y=d;console.log("Добавлен элемент "+y+" в группу "+c),this.addStateChange("add",c,y)}}}}}console.log(r,a)},deep:!0}}},O=m,A=(r("60bc"),r("9914"),Object(v["a"])(O,l,o,!1,null,null,null)),T=A.exports,_={name:"App",components:{TestTask:T}},w=_,k=(r("cf25"),Object(v["a"])(w,n,s,!1,null,null,null)),x=k.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(x)}}).$mount("#app")},"7be9":function(e,t,r){},9150:function(e,t,r){},9914:function(e,t,r){"use strict";r("9150")},aef2:function(e,t,r){"use strict";r("7be9")},cf25:function(e,t,r){"use strict";r("fea6")},fea6:function(e,t,r){}});
//# sourceMappingURL=app.81bc6eef.js.map